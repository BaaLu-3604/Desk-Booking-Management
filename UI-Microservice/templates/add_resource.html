{% extends 'layout.html' %}

{% block title %}Add Resource{% endblock %}

{% block content %}
{% if 'username' in session %}
<div class="container d-flex justify-content-center" style="margin-top: 6%;">
    <div class="col-4">
        <div class="p-4 rounded-4" style="background-color: rgba(201, 197, 199, 0.705);
                -webkit-backdrop-filter: blur(6px);
                backdrop-filter: blur(6px);">
            <form class="" method="post">
                <h2 class="text-center mt-3 mb-4">Add Resource</h2>
                <div class="">
                    <label for="selectBuilding" class="form-label  opacity-100 fw-bold">Building:</label>
                    <select required id="selectBuilding" name="selectBuilding" class="form-select mb-3">
                        <option value="select">--Select--</option>
                        <option value="Deccan Park">Deccan Park</option>
                        <option value="Synergy Park">Synergy Park</option>
                        <option value="Kohinoor Park">Kohinoor Park</option>
                    </select>
                </div>
                <div>
                    <label for="selectBlock" class="form-label  fw-bold">Block</label>
                    <select required id="selectBlock" name="selectBlock" class="form-select mb-3">
                        <option value="">--Select--</option>
                        <option id="addBlock">Add New Block</option>
                    </select>
                </div>

                <div class=" mb-1">
                    <label for="deskNo" class="form-label fw-bold">Desk No</label>
                    <select required id="deskNo" name="deskNo" class="form-select mb-3">
                        <option value="select">--Select--</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                </div>

                <div class="mb-1">
                    <label for="deskNo" class="form-label  fw-bold">Resources</label>
                    <input type="text" class="form-control mb-3" id="resources" name="resources"
                        placeholder="Enter Resources" required>
                </div>

                <div class="d-flex mt-4  justify-content-center">
                    <input type="submit" class="btn fw-bold btn-primary" value="Add Resource">
                </div>
        </div>
        <p class="text-center mt-3" style="color: tomato;">{{error}}</p>
        </form>
    </div>
</div>

<script>
    const selectBuilding = document.getElementById('selectBuilding');
    const selectBlock = document.getElementById('selectBlock');

    const DeccanBlocks = ["DP A", "DP B", "DP C", "DP D"];
    const SynergyBlocks = ["S A", "S B", "S C"];
    const KohinoorBlocks = ["K A", "K B", "K C"];

    selectBuilding.addEventListener('change', function () {
        const selectedBuilding = selectBuilding.value;
        const blocks =
            selectedBuilding === 'Deccan Park'
                ? DeccanBlocks
                : selectedBuilding === 'Synergy Park'
                    ? SynergyBlocks
                    : selectedBuilding === 'Kohinoor Park'
                        ? KohinoorBlocks
                        : [];

        selectBlock.innerHTML = '<option value="">--Select--</option>';

        blocks.forEach(function (block) {
            const option = document.createElement('option');
            option.value = block.toString();
            option.textContent = block;
            selectBlock.appendChild(option);
        });

        const addNewBlockOption = document.createElement('option');
        addNewBlockOption.value = 'addNewBlock';
        addNewBlockOption.textContent = 'Add New Block';
        selectBlock.appendChild(addNewBlockOption);
    });
</script>
{% else %}
<div class="p-3 w-25 offset-5 my-5 rounded-3 fw-bold bg-danger text-white">
    <p>Session Expired Please Login ..!</p>
</div>
{% endif %}
{% endblock %}